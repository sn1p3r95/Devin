<!DOCTYPE html>
<html lang="fr">
	<head>
		<meta charset="UTF-8">
		<title>Jeu du devin</title>
	</head>
	<script>
		window.addEventListener('load', main);
		function main() {
			let nombreSecret;
			let compteur;
			let valeur;
			let valider = document.querySelector('button');
			let entree = document.querySelector('input');
			let	message = document.querySelector('div');

			function initialiser(){
				nombreSecret = Math.floor(Math.random()*100) + 1;
				compteur = 7;
				entree.value = '';
				message.innerHTML = '<p> Force a toi !</p>';
				console.log('Nombre : ', nombreSecret);
			}
			initialiser();
			valider.addEventListener('click', jouer);				
			
			function jouer(){
				console.log('function jouer()');
				valeur = parseInt(entree.value);
				console.log(valeur);

				if(isNaN(valeur) || valeur < 1 || valeur > 100)
				{
					message.innerHTML = '<p> Entree invalide ! </p>';
					return;
				}				
				compteur--;
				if(valeur === nombreSecret){
					message.innerHTML = '<p> Bravo, vous avez gagne ! </p>';
					valider.textContent = 'Rejouer';
					valider.removeEventListener('click', jouer);
					valider.addEventListener('click', reJouer);
				}else if(compteur <= 0){
					message.innerHTML = '<p>Desole, vous avez perdu, le nombre secret etait '+nombreSecret+'</p>';
					valider.textContent = 'Rejouer';
					valider.removeEventListener('click', jouer);
					valider.addEventListener('click', reJouer);
				}else						
					if(valeur < nombreSecret)
						message.innerHTML = '<p>Trop Petit, il vous reste '+compteur+' tentative(s) </p>';
					else if(valeur > nombreSecret)
						message.innerHTML = '<p>Trop grand, il vous reste '+compteur+' tentative(s) </p>';						
			}

			function reJouer(){
				valider.textContent = "Essayer";
				valider.removeEventListener('click', reJouer);
				valider.addEventListener('click', jouer);
				initialiser();
			}
		}
	</script>
	<body>
		<h2> Jeu du Devin : Deviner un nombre entier compris entre 1 et 100</h2>
		<h3> (On a le droit Ã  7 tentatives maximum)</h3>
		<input type="text" id="input" value=""/>
		<button id="valider">Essayer</button>
		<div id="message"></div>
	</body>
</html>